(window.webpackJsonp=window.webpackJsonp||[]).push([[15,27],{"1Ri8":function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),o=n("7DNP"),l=n("jnCu");t.default=function(){return r.a.createElement(l.a,{type:"404",style:{minHeight:500,height:"80%"},linkElement:o.Link})}},maEh:function(e,t,n){"use strict";n.r(t);n("GNNt");var a,r,o=n("wEI+"),l=(n("T2oS"),n("W9HT")),i=(n("miYZ"),n("tsqr")),c=n("pLtp"),s=n.n(c),u=n("/HRN"),p=n.n(u),m=n("WaGi"),h=n.n(m),d=n("ZDA2"),f=n.n(d),g=n("/+P4"),y=n.n(g),v=n("K47E"),E=n.n(v),k=n("N9n2"),b=n.n(k),M=n("xHqa"),C=n.n(M),x=n("XXOK"),S=n.n(x),w=n("UXZV"),R=n.n(w),N=(n("B9cy"),n("Ol7k")),P=n("q1tI"),I=n.n(P),K=n("17x9"),O=n.n(K),L=n("ZFw/"),z=n.n(L),j=n("MuoO"),D=n("7DNP"),T=n("E6Dt"),A=n("TSYQ"),W=n.n(A),q=n("4zCG"),U=n("NTd/"),F=n.n(U),G=n("xc/l"),H=n.n(G),B=n("SftL"),Q=n.n(B),J=n("Jo+v"),X=n.n(J),Z=(n("qVdP"),n("jsC+")),V=(n("/zsF"),n("PArb")),Y=(n("lUTK"),n("BvKs")),$=(n("Pwec"),n("CtXQ")),_=n("V/fD"),ee=n.n(_),te=n("fqkP"),ne=n.n(te),ae=(n("h3zL"),n("20nU"),a=ne()(600),r=function(e){function t(){var e,n;p()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=f()(this,(e=y()(t)).call.apply(e,[this].concat(r))),C()(E()(n),"state",{pageType:"main"}),C()(E()(n),"toggle",function(){var e=n.props,t=e.collapsed;(0,e.onCollapse)(!t),n.triggerResizeEvent()}),n}return b()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=this.props.location.pathname;this.handleActiveMenu(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.location.pathname;this.props.location.pathname!==t&&this.handleActiveMenu(t)}},{key:"componentWillUnmount",value:function(){this.triggerResizeEvent.cancel()}},{key:"handleActiveMenu",value:function(e){this.setState({pageType:"/"===e||"/main"===e?"main":"robot"})}},{key:"triggerResizeEvent",value:function(){var e=document.createEvent("HTMLEvents");e.initEvent("resize",!0,!1),window.dispatchEvent(e)}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=void 0===t?{}:t,a=e.collapsed,r=e.isMobile,o=e.logo,i=e.onMenuClick,c=e.onGlobalClick,s=(e.onRobotClick,this.state.pageType,n.roleType,I.a.createElement(Y.a,{className:"menu",selectedKeys:[],onClick:i},I.a.createElement(Y.a.Item,{key:"logout"},I.a.createElement($.a,{type:"logout"}),"退出登录"))),u=I.a.createElement(Y.a,{className:"menu",selectedKeys:[],onClick:c},I.a.createElement(Y.a.Item,{key:"cn"},"cn 中文"),I.a.createElement(Y.a.Item,{key:"us"},"us English"));return I.a.createElement("div",{className:"header global-header"},r&&[I.a.createElement(D.Link,{to:"/",className:"logo",key:"logo"},I.a.createElement("img",{src:o,alt:"logo",width:"32"})),I.a.createElement(V.a,{type:"vertical",key:"line"})],I.a.createElement($.a,{className:"trigger",type:a?"menu-unfold":"menu-fold",onClick:this.toggle}),I.a.createElement("div",{className:"right"},n.username?I.a.createElement(Z.a,{overlay:s},I.a.createElement("span",{className:"action account"},I.a.createElement($.a,{type:"user",style:{color:"#1890FF",fontSize:24}}),I.a.createElement("span",{className:"name"},n.username))):I.a.createElement(l.a,{size:"small",style:{marginLeft:8}}),I.a.createElement(Z.a,{overlay:u},I.a.createElement("span",{className:"action account"},I.a.createElement($.a,{type:"global",style:{color:"#1890FF",fontSize:24}})))))}}]),t}(P.PureComponent),ee()(r.prototype,"triggerResizeEvent",[a],X()(r.prototype,"triggerResizeEvent"),r.prototype),r),re=n("htGi"),oe=n.n(re),le=(n("UYKw"),n("qhzC")),ie=n("TbGu"),ce=n.n(ie),se=n("vRGJ"),ue=n.n(se);n("mR0u");function pe(e){var t=e.split("/").filter(function(e){return e});return t.map(function(e,n){return"/".concat(t.slice(0,n+1).join("/"))})}var me=N.a.Sider,he=Y.a.SubMenu,de=function(e){return"string"==typeof e&&0===e.indexOf("http")?I.a.createElement("img",{src:e,alt:"icon",className:"icon sider-menu-item-img"}):"string"==typeof e?I.a.createElement($.a,{type:e}):e},fe=function(e,t){return e.filter(function(e){return ue()(e).test(t)})},ge=function(e){function t(e){var n;return p()(this,t),n=f()(this,y()(t).call(this,e)),C()(E()(n),"getMenuItemPath",function(e){var t=n.conversionPath(e.path),a=de(e.icon),r=e.target,o=e.name;return/^https?:\/\//.test(t)?I.a.createElement("a",{href:t,target:r},a,I.a.createElement("span",null,o)):I.a.createElement(D.Link,{to:t,target:r,replace:t===n.props.location.pathname,onClick:n.props.isMobile?function(){n.props.onCollapse(!0)}:void 0},a,I.a.createElement("span",null,o))}),C()(E()(n),"getSubMenuOrItem",function(e){if(e.children&&e.children.some(function(e){return e.name})){var t=n.getNavMenuItems(e.children);return t&&t.length>0?I.a.createElement(he,{title:e.icon?I.a.createElement("span",null,de(e.icon),I.a.createElement("span",null,e.name)):e.name,key:e.path},t):null}return I.a.createElement(Y.a.Item,{key:e.path},n.getMenuItemPath(e))}),C()(E()(n),"getNavMenuItems",function(e){return e?e.filter(function(e){return e.name&&!e.hideInMenu}).map(function(e){var t=n.getSubMenuOrItem(e);return n.checkPermissionItem(e.authority,t)}).filter(function(e){return e}):[]}),C()(E()(n),"getSelectedMenuKeys",function(){return pe(n.props.location.pathname).map(function(e){return fe(n.flatMenuKeys,e).pop()})}),C()(E()(n),"conversionPath",function(e){return e&&0===e.indexOf("http")?e:"/".concat(e||"").replace(/\/+/g,"/")}),C()(E()(n),"checkPermissionItem",function(e,t){return n.props.Authorized&&n.props.Authorized.check?(0,n.props.Authorized.check)(e,t):t}),C()(E()(n),"isMainMenu",function(e){return n.menus.some(function(t){return e&&(t.key===e||t.path===e)})}),C()(E()(n),"handleOpenChange",function(e){var t=e[e.length-1],a=e.filter(function(e){return n.isMainMenu(e)}).length>1;n.setState({openKeys:a?[t]:ce()(e)})}),n.menus=e.menuData,n.flatMenuKeys=n.getFlatMenuKeys(e.menuData),n.state={openKeys:n.getDefaultCollapsedSubMenus(e)},n}return b()(t,e),h()(t,[{key:"componentWillReceiveProps",value:function(e){e.location.pathname!==this.props.location.pathname&&this.setState({openKeys:this.getDefaultCollapsedSubMenus(e)})}},{key:"getDefaultCollapsedSubMenus",value:function(e){var t=this;return pe((e||this.props).location.pathname).map(function(e){return fe(t.flatMenuKeys,e)[0]}).filter(function(e){return e})}},{key:"getFlatMenuKeys",value:function(e){var t=this,n=[];return e.forEach(function(e){e.children&&(n=n.concat(t.getFlatMenuKeys(e.children))),n.push(e.path)}),n}},{key:"render",value:function(){var e=this.props,t=e.logo,n=e.collapsed,a=e.onCollapse,r=this.state.openKeys,o=n?{}:{openKeys:r},l=this.getSelectedMenuKeys();return l.length||(l=[r[r.length-1]]),I.a.createElement(me,{trigger:null,collapsible:!0,collapsed:n,breakpoint:"lg",onCollapse:a,width:256,className:"sider sider-menu"},I.a.createElement("div",{className:"logo",key:"logo"},I.a.createElement(D.Link,{to:"/"},I.a.createElement("img",{src:t,alt:"logo"}),I.a.createElement("h1",null,F.a.formatMessage({id:"total.flp"})))),I.a.createElement(Y.a,oe()({key:"Menu",theme:"dark",mode:"inline"},o,{onOpenChange:this.handleOpenChange,selectedKeys:l,style:{padding:"16px 0",width:"100%"}}),this.getNavMenuItems(this.menus)))}}]),t}(P.PureComponent),ye=function(e){return e.isMobile?I.a.createElement(le.a,{parent:null,level:null,iconChild:null,open:!e.collapsed,onMaskClick:function(){e.onCollapse(!0)},width:"256px"},I.a.createElement(ge,oe()({},e,{collapsed:!e.isMobile&&e.collapsed}))):I.a.createElement(ge,e)},ve=n("1Ri8"),Ee=n("vu7d"),ke=n("QjNE"),be=n("dNKj"),Me=n("tkAB"),Ce=n.n(Me),xe=N.a.Content,Se=N.a.Header,we=ke.a.AuthorizedRoute,Re=ke.a.check,Ne=H.a;Ne=sessionStorage.getItem("global")&&"us"===sessionStorage.getItem("global")?Q.a:H.a;var Pe=["/login"],Ie=[];Object(be.a)().forEach(function e(t){t&&t.children&&t.children[0]&&t.children[0].path&&(Ie.push({from:"".concat(t.path),to:"".concat(t.children[0].path)}),t.children.forEach(function(t){e(t)}))});var Ke,Oe=function e(t,n){var a={},r={},o=!0,l=!1,i=void 0;try{for(var c,s=S()(t);!(o=(c=s.next()).done);o=!0){var u=c.value;n[u.path]||(a[u.path]=u),u.children&&R()(r,e(u.children,n))}}catch(e){l=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(l)throw i}}return R()({},n,a,r)},Le={"screen-xs":{maxWidth:575},"screen-sm":{minWidth:576,maxWidth:767},"screen-md":{minWidth:768,maxWidth:991},"screen-lg":{minWidth:992,maxWidth:1199},"screen-xl":{minWidth:1200}},ze={system:{name:"系统管理",key:"system",path:""},resource:{name:"资源管理",key:"resource",path:"/system/resource"},authority:{name:"权限管理",key:"authority",path:"/system/auth"},user:{name:"用户管理",key:"user",path:"/system/user"},config:{name:"系统配置",key:"config",path:"/system/config"}};Object(q.enquireScreen)(function(e){Ke=e});var je=function(e){function t(){var e,n;p()(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n=f()(this,(e=y()(t)).call.apply(e,[this].concat(r))),C()(E()(n),"state",{isMobile:Ke}),C()(E()(n),"getBashRedirect",function(){var e=new URL(window.location.href),t=e.searchParams.get("redirect");if(!t){var a=n.props.routerData;return s()(a).find(function(e){return Re(a[e].authority,e)&&"/"!==e})}return e.searchParams.delete("redirect"),window.history.replaceState(null,"redirect",e.href),t}),C()(E()(n),"handleMenuCollapse",function(e){n.props.dispatch({type:"global/changeLayoutCollapsed",payload:e})}),C()(E()(n),"handleMenuClick",function(e){var t=e.key,a=n.props,r=a.dispatch;a.location.pathname;"logout"===t?r({type:"user/logout"}).catch(function(e){i.a.error(e.message)}):r(D.routerRedux.push({pathname:ze[t].path}))}),C()(E()(n),"handleGlobalClick",function(e){var t=e.key,a=n.props;a.dispatch,a.location.pathname;"cn"===t?sessionStorage.setItem("global","cn"):"us"===t&&sessionStorage.setItem("global","us"),window.location.reload()}),C()(E()(n),"handleRobotClick",function(e){var t=n.props,a=t.dispatch,r=(t.location.pathname,t.currentUser);a({type:"user/selectRobot",payload:e}).then(function(){a({type:"user/fetchMenuList",payload:{roleId:r.roleId,roleType:r.roleType,robotCode:e.code}})})}),C()(E()(n),"handleShowFullPage",function(){var e=n.props.location.pathname;return~Pe.indexOf(e)}),n}return b()(t,e),h()(t,[{key:"getChildContext",value:function(){var e=this.props,t=e.location,n=e.routerData;return{location:t,breadcrumbNameMap:Oe(Object(be.a)(),n)}}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.location.pathname,a=t.dispatch;Object(ke.b)(n);this.enquireHandler=Object(q.enquireScreen)(function(t){e.setState({isMobile:t})}),sessionStorage.getItem("username")||a(D.routerRedux.replace("/login")),a({type:"user/setAuthorityMenu"}).catch(function(e){i.a.error(e.message)})}},{key:"componentWillUnmount",value:function(){Object(q.unenquireScreen)(this.enquireHandler)}},{key:"getPageTitle",value:function(){var e=this.props,t=e.routerData,n=e.location.pathname,a=F.a.formatMessage({id:"total.flp"});return t[n]&&t[n].name&&(a="".concat(t[n].name," - ").concat(F.a.formatMessage({id:"total.flp"}))),a}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.collapsed,a=e.routerData,r=e.match,i=e.location,c=(e.menuLoading,e.initLoading);e.menuList;if(c)return I.a.createElement("div",{style:{width:"100%",height:"100%",margin:"auto",paddingTop:50,textAlign:"center"}},I.a.createElement(l.a,{size:"large"}));var s=this.getBashRedirect(),u=this.handleShowFullPage()?I.a.createElement(N.a,null,I.a.createElement(xe,null,I.a.createElement(D.Switch,null,Ie.map(function(e){return I.a.createElement(D.Redirect,{key:e.from,exact:!0,from:e.from,to:e.to})}),Object(Ee.a)(r.path,a).map(function(e){return I.a.createElement(we,{key:e.key,path:e.path,component:e.component,exact:e.exact,authority:e.authority,redirectPath:"/exception/403"})}),I.a.createElement(D.Redirect,{exact:!0,from:"/",to:s}),I.a.createElement(D.Route,{render:ve.default})))):I.a.createElement(N.a,null,I.a.createElement(ye,{logo:Ce.a,Authorized:ke.a,menuData:Object(be.a)(),collapsed:n,location:i,isMobile:this.state.isMobile,onCollapse:this.handleMenuCollapse}),I.a.createElement(N.a,null,I.a.createElement(Se,{style:{padding:0}},I.a.createElement(ae,{logo:Ce.a,currentUser:t,collapsed:n,location:i,isMobile:this.state.isMobile,onCollapse:this.handleMenuCollapse,onMenuClick:this.handleMenuClick,onRobotClick:this.handleRobotClick,onGlobalClick:this.handleGlobalClick})),I.a.createElement(xe,{style:{margin:"24px 24px 0"}},I.a.createElement(D.Switch,null,Ie.map(function(e){return I.a.createElement(D.Redirect,{key:e.from,exact:!0,from:e.from,to:e.to})}),Object(Ee.a)(r.path,a).map(function(e){return I.a.createElement(we,{key:e.key,path:e.path,component:e.component,exact:e.exact,authority:e.authority,redirectPath:"/exception/403"})}),I.a.createElement(D.Redirect,{exact:!0,from:"/",to:s}),I.a.createElement(D.Route,{render:ve.default})))));return I.a.createElement(o.a,{locale:Ne},I.a.createElement(z.a,{title:this.getPageTitle()},I.a.createElement(T.ContainerQuery,{query:Le},function(e){return I.a.createElement("div",{className:W()(e)},u)})))}}]),t}(I.a.PureComponent);C()(je,"childContextTypes",{location:O.a.object,breadcrumbNameMap:O.a.object});t.default=Object(j.connect)(function(e){var t=e.user,n=e.global,a=e.loading;return{currentUser:t.currentUser,collapsed:n.collapsed,menuLoading:a.effects["user/fetchMenuList"],menuList:t.menuList,initLoading:a.effects["user/initSubsQueue"]}})(je)},tkAB:function(e,t,n){e.exports=n.p+"8437374a128abff1cf45c3d8fc8fee41.jpg"}}]);