(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{kLhj:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return M});n("IzEo");var a,r=n("bx4M"),i=(n("g9YV"),n("wCAj")),s=(n("+L6B"),n("2/Rp")),o=(n("Awhp"),n("KrTs")),c=(n("MXD1"),n("CFYs")),u=(n("5Dmo"),n("3S7+")),l=(n("miYZ"),n("tsqr")),d=n("/HRN"),p=n.n(d),k=n("WaGi"),m=n.n(k),f=n("ZDA2"),h=n.n(f),y=n("/+P4"),T=n.n(y),g=n("K47E"),E=n.n(g),N=n("N9n2"),v=n.n(N),w=n("xHqa"),I=n.n(w),S=(n("y8nQ"),n("Vl3Y")),C=n("q1tI"),x=n.n(C),b=n("MuoO"),R=n("7DNP"),L=n("NTd/"),q=n.n(L),P=(S.a.Item,function(e){return q.a.formatMessage(e)}),M=Object(b.connect)(function(e){return{lists:e.taskTrain.lists,username:e.user.currentUser.username,loading:e.loading.effects["taskTrain/queryTrainList"]}})(a=function(e){function t(){var e,n;p()(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=h()(this,(e=T()(t)).call.apply(e,[this].concat(r))),I()(E()(n),"state",{visible:!1,record:{}}),I()(E()(n),"onCancel",function(){n.setState({visible:!1})}),I()(E()(n),"handleRefresh",function(){n.queryTrainList()}),I()(E()(n),"queryTrainList",function(){var e=n.props,t=e.dispatch,a=e.username,r=l.a.loading(P({id:"total.searching"}),0);t({type:"taskTrain/queryTrainList",payload:{username:a,category:"running"}}).then(function(){r()}).catch(function(){r()})}),I()(E()(n),"showdetail",function(e){var t=e.taskName,a=e.modelToken,r="COMPLETE"===e.runningStatus?2:1;(0,n.props.dispatch)(R.routerRedux.push("/task/train/detail?taskName=".concat(t,"&token=").concat(a,"&type=").concat(r)))}),I()(E()(n),"handleStop",function(e,t){var a=n.props;(0,a.dispatch)({type:t,payload:{username:a.username,modelToken:e.modelToken}}).then(function(e){0===e.code?(l.a.success(e.data.describes.join("，")),n.queryTrainList()):1===e.code&&l.a.error(e.data.describes.join("，"))})}),I()(E()(n),"operateItem",function(e){var t=n.props.dispatch,a=e.runningStatus;return x.a.createElement(C.Fragment,null,"COMPLETE"===a&&[x.a.createElement("span",{className:"point",onClick:function(){t(R.routerRedux.push("/task/predict/add?token=".concat(e.modelToken)))}},P({id:"total.reasoning"})),x.a.createElement("span",{className:"point",onClick:function(){t(R.routerRedux.push("/task/train/add?taskId=".concat(e.taskId,"&taskName=").concat(e.taskName,"&token=").concat(e.modelToken,"&type=edit")))}},P({id:"train.retrain"}))],("SUSPEND"===a||"RESTART"===a||"STOP"===a)&&x.a.createElement("span",{style:{color:"#ddd"}},"——"),"RUNNING"===a&&[x.a.createElement("span",{className:"point",onClick:function(){return n.handleStop(e,"taskTrain/resolveTaskStop")}},P({id:"train.stopBtn"})),x.a.createElement("span",{className:"point",onClick:function(){return n.handleStop(e,"taskTrain/resolveTaskSuspend")}},P({id:"train.waiting"}))],"WAITING"===a&&[x.a.createElement("span",{className:"point",onClick:function(){return n.handleStop(e,"taskTrain/resolveTaskStop")}},P({id:"train.stopBtn"})),x.a.createElement("span",{className:"point",onClick:function(){return n.handleStop(e,"taskTrain/resolveTaskRestart")}},P({id:"train.restart"}))])}),I()(E()(n),"trainColumns",function(){n.props.dispatch;return[{title:P({id:"total.taskId"}),key:"taskId",dataIndex:"taskId"},{title:P({id:"total.taskName"}),key:"taskName",dataIndex:"taskName",render:function(e,t,a){return x.a.createElement(u.a,{title:P({id:"total.detail"})},x.a.createElement("span",{className:"point",onClick:function(){return n.showdetail(t)}},e))}},{title:"modelToken",key:"modelToken",dataIndex:"modelToken"},{title:P({id:"train.trainprogress"}),key:"percent",dataIndex:"percent",render:function(e,t,n){return x.a.createElement(c.a,{percent:e})}},{title:P({id:"train.status"}),key:"runningStatus",dataIndex:"runningStatus",render:function(e,t,n){var a="",r="";switch(e.toLowerCase()){case"running":a="train.running",r="processing";break;case"suspend":a="train.suspend",r="processing";break;case"restart":a="train.restart",r="processing";break;case"waiting":a="train.waiting",r="warning";break;case"complete":a="train.complete",r="success";break;case"stop":a="train.stop",r="processing";break;default:a="train.unKnown",r="default"}return x.a.createElement(o.a,{status:r,text:P({id:a})})}},{title:P({id:"total.operate"}),key:"operate",dataIndex:"operate",render:function(e,t,a){return n.operateItem(t)}}]}),n}return v()(t,e),m()(t,[{key:"componentDidMount",value:function(){this.queryTrainList()}},{key:"render",value:function(){var e=this.props,t=e.lists,n=e.dispatch;return x.a.createElement(r.a,{title:P({id:"train.list"})},x.a.createElement("div",null,x.a.createElement(s.a,{icon:"undo",type:"primary",style:{marginRight:"20px"},onClick:this.handleRefresh},P({id:"total.refresh"})),x.a.createElement(s.a,{icon:"plus",type:"primary",style:{marginRight:"20px"},onClick:function(){n(R.routerRedux.push("/task/train/add"))}},P({id:"train.create"}))),x.a.createElement("div",{style:{padding:"20px 0"}},x.a.createElement(i.a,{dataSource:t,columns:this.trainColumns(),rowKey:function(e,t){return t}})))}}]),t}(C.PureComponent))||a},t33a:function(e,t,n){e.exports=n("cHUP")(10)}}]);